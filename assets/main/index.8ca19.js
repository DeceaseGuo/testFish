window.__require=function e(o,t,n){function r(l,s){if(!t[l]){if(!o[l]){var i=l.split("/");if(i=i[i.length-1],!o[i]){var a="function"==typeof __require&&__require;if(!s&&a)return a(i,!0);if(c)return c(i,!0);throw new Error("Cannot find module '"+l+"'")}l=i}var u=t[l]={exports:{}};o[l][0].call(u.exports,function(e){return r(o[l][1][e]||e)},u,u.exports,e,o,t,n)}return t[l].exports}for(var c="function"==typeof __require&&__require,l=0;l<n.length;l++)r(n[l]);return r}({LoadBundle:[function(e,o,t){"use strict";cc._RF.push(o,"c0c2cxrOxRCmLQ9Bd4TT9u5","LoadBundle");var n,r=this&&this.__extends||(n=function(e,o){return(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,o){e.__proto__=o}||function(e,o){for(var t in o)Object.prototype.hasOwnProperty.call(o,t)&&(e[t]=o[t])})(e,o)},function(e,o){function t(){this.constructor=e}n(e,o),e.prototype=null===o?Object.create(o):(t.prototype=o.prototype,new t)}),c=this&&this.__decorate||function(e,o,t,n){var r,c=arguments.length,l=c<3?o:null===n?n=Object.getOwnPropertyDescriptor(o,t):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)l=Reflect.decorate(e,o,t,n);else for(var s=e.length-1;s>=0;s--)(r=e[s])&&(l=(c<3?r(l):c>3?r(o,t,l):r(o,t))||l);return c>3&&l&&Object.defineProperty(o,t,l),l};Object.defineProperty(t,"__esModule",{value:!0});var l=cc._decorator,s=l.ccclass,i=l.property,a=function(e){function o(){var o=null!==e&&e.apply(this,arguments)||this;return o.fishicon=[],o}return r(o,e),o.prototype.onLoad=function(){cc.systemEvent.on(cc.SystemEvent.EventType.KEY_DOWN,this.onKeyDown,this)},o.prototype.onKeyDown=function(e){e.keyCode===cc.macro.KEY.z?(console.log("Z \u9375\u88ab\u6309\u4e0b"),this.testLoad()):e.keyCode===cc.macro.KEY.x?(console.log("X \u9375\u88ab\u6309\u4e0b"),this.secondLoad()):e.keyCode===cc.macro.KEY.q?(console.log("Q \u9375\u88ab\u6309\u4e0b"),this.preloadScenes("PlistBundle","Game",0)):e.keyCode===cc.macro.KEY.w?(console.log("W \u9375\u88ab\u6309\u4e0b"),this.preloadScenes("PlistOldBundle","Game",0)):e.keyCode===cc.macro.KEY.a?(console.log("A \u9375\u88ab\u6309\u4e0b"),this.testOldLoad()):e.keyCode===cc.macro.KEY.r?(console.log("R \u9375\u88ab\u6309\u4e0b"),cc.director.loadScene("PlistBundle/scene/Game")):e.keyCode===cc.macro.KEY.p&&(console.log("P \u9375\u88ab\u6309\u4e0b"),console.log("onlyLoad"),this.oldLoadBundle("PlistBundle"))},o.prototype.testLoad=function(){var e=this;cc.assetManager.loadBundle("TestBundle",function(o,t){o?console.error("\u8f09\u5165 bundle \u5931\u6557",o):t.load("AutoAtlas",cc.SpriteAtlas,function(o,t){if(o)console.error("\u8f09\u5165 SpriteFrame \u5931\u6557",o);else{console.log("\u8f09\u5165\u5b8c\u6210",t);var n=t.getSpriteFrame("ButterflyRSC_lock");e.fishicon[0].spriteFrame=n;var r=t.getSpriteFrame("ClownRSC_lock");e.fishicon[1].spriteFrame=r;var c=t.getSpriteFrame("DragonCarp_lock");e.fishicon[2].spriteFrame=c}})})},o.prototype.secondLoad=function(){var e=this;cc.assetManager.loadBundle("MyIcon",function(o,t){o?console.error("\u8f09\u5165 bundle \u5931\u6557",o):t.load("TestIcon",cc.Texture2D,function(o,t){if(o)console.error("\u8f09\u5165 TestIcon \u5931\u6557",o);else{console.log("\u8f09\u5165\u5b8c\u6210",t);for(var n=0;n<3;n++){var r=new cc.SpriteFrame;r.setTexture(t),r.setRect(new cc.Rect(140*n,0,140,160)),e.fishicon[n].spriteFrame=r}}})})},o.prototype.preloadScenes=function(e,o,t){var n=this;return new Promise(function(r){n.loadBundle(e).then(function(e){e.loadScene("scene/"+o,function(e,o){n.refreshProgress(t,e,o)},function(e,o){e&&(console.error(e),r(null)),console.log("\u52a0\u8f09game scene \u6210\u529f"),cc.director.runScene(o),r(o)})})})},o.prototype.refreshProgress=function(e,o,t){var n=e+o/t;console.log("loading_resource",[Math.floor(100*n)+""])},o.prototype.loadBundle=function(e){return new Promise(function(o){cc.assetManager.loadBundle(e,function(){},function(e,t){if(e)return console.error("ddt "+e),void o(null);console.log("\u52a0\u8f09PlistBundle\u6210\u529f"),o(t)})})},o.prototype.testOldLoad=function(){console.log("\u958b\u59cb\u5de8\u9be8\u8b80\u53d6\u65b9\u5f0f"),this.oldLoadBundle("PlistBundle")},o.prototype.oldLoadBundle=function(e){cc.assetManager.loadBundle(e,function(e,o){o?console.log("\u5de8\u9be8\u8b80\u53d6\u65b9\u5f0f \u6210\u529f"):console.error("\u5de8\u9be8\u8b80\u53d6\u65b9\u5f0f \u5931\u6557")})},c([i(cc.Sprite)],o.prototype,"fishicon",void 0),c([s],o)}(cc.Component);t.default=a,cc._RF.pop()},{}]},{},["LoadBundle"]);