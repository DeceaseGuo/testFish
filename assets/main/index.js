window.__require=function e(o,n,t){function r(l,i){if(!n[l]){if(!o[l]){var s=l.split("/");if(s=s[s.length-1],!o[s]){var u="function"==typeof __require&&__require;if(!i&&u)return u(s,!0);if(c)return c(s,!0);throw new Error("Cannot find module '"+l+"'")}l=s}var a=n[l]={exports:{}};o[l][0].call(a.exports,function(e){return r(o[l][1][e]||e)},a,a.exports,e,o,n,t)}return n[l].exports}for(var c="function"==typeof __require&&__require,l=0;l<t.length;l++)r(t[l]);return r}({LoadBundle:[function(e,o,n){"use strict";cc._RF.push(o,"c0c2cxrOxRCmLQ9Bd4TT9u5","LoadBundle");var t,r=this&&this.__extends||(t=function(e,o){return(t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,o){e.__proto__=o}||function(e,o){for(var n in o)Object.prototype.hasOwnProperty.call(o,n)&&(e[n]=o[n])})(e,o)},function(e,o){function n(){this.constructor=e}t(e,o),e.prototype=null===o?Object.create(o):(n.prototype=o.prototype,new n)}),c=this&&this.__decorate||function(e,o,n,t){var r,c=arguments.length,l=c<3?o:null===t?t=Object.getOwnPropertyDescriptor(o,n):t;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)l=Reflect.decorate(e,o,n,t);else for(var i=e.length-1;i>=0;i--)(r=e[i])&&(l=(c<3?r(l):c>3?r(o,n,l):r(o,n))||l);return c>3&&l&&Object.defineProperty(o,n,l),l},l=this&&this.__awaiter||function(e,o,n,t){return new(n||(n=Promise))(function(r,c){function l(e){try{s(t.next(e))}catch(o){c(o)}}function i(e){try{s(t.throw(e))}catch(o){c(o)}}function s(e){var o;e.done?r(e.value):(o=e.value,o instanceof n?o:new n(function(e){e(o)})).then(l,i)}s((t=t.apply(e,o||[])).next())})},i=this&&this.__generator||function(e,o){var n,t,r,c,l={label:0,sent:function(){if(1&r[0])throw r[1];return r[1]},trys:[],ops:[]};return c={next:i(0),throw:i(1),return:i(2)},"function"==typeof Symbol&&(c[Symbol.iterator]=function(){return this}),c;function i(e){return function(o){return s([e,o])}}function s(c){if(n)throw new TypeError("Generator is already executing.");for(;l;)try{if(n=1,t&&(r=2&c[0]?t.return:c[0]?t.throw||((r=t.return)&&r.call(t),0):t.next)&&!(r=r.call(t,c[1])).done)return r;switch(t=0,r&&(c=[2&c[0],r.value]),c[0]){case 0:case 1:r=c;break;case 4:return l.label++,{value:c[1],done:!1};case 5:l.label++,t=c[1],c=[0];continue;case 7:c=l.ops.pop(),l.trys.pop();continue;default:if(!(r=(r=l.trys).length>0&&r[r.length-1])&&(6===c[0]||2===c[0])){l=0;continue}if(3===c[0]&&(!r||c[1]>r[0]&&c[1]<r[3])){l.label=c[1];break}if(6===c[0]&&l.label<r[1]){l.label=r[1],r=c;break}if(r&&l.label<r[2]){l.label=r[2],l.ops.push(c);break}r[2]&&l.ops.pop(),l.trys.pop();continue}c=o.call(e,l)}catch(i){c=[6,i],t=0}finally{n=r=0}if(5&c[0])throw c[1];return{value:c[0]?c[1]:void 0,done:!0}}};Object.defineProperty(n,"__esModule",{value:!0});var s=cc._decorator,u=s.ccclass,a=s.property,f=function(e){function o(){var o=null!==e&&e.apply(this,arguments)||this;return o.fishicon=[],o.trueloadAsset=function(e,n){return l(o,void 0,Promise,function(){return i(this,function(){return[2,new Promise(function(o,t){e.load(n,cc.Asset,function(e,n){if(e)return console.error("123___\u53d6\u5f97\u5931\u6557 => ",e),void t(e);o(n)})})]})})},o.loadAsset=function(e,n){return l(o,void 0,Promise,function(){return i(this,function(){return[2,new Promise(function(o,t){e.load(n,cc.Prefab,function(e,n){if(e)return console.error("\u53d6\u5f97\u5931\u6557 => ",e),void t(e);o(n)})})]})})},o}return r(o,e),o.prototype.onLoad=function(){cc.systemEvent.on(cc.SystemEvent.EventType.KEY_DOWN,this.onKeyDown,this)},o.prototype.onKeyDown=function(e){e.keyCode===cc.macro.KEY.z?(console.log("Z \u9375\u88ab\u6309\u4e0b"),this.testLoad()):e.keyCode===cc.macro.KEY.x?(console.log("X \u9375\u88ab\u6309\u4e0b"),this.secondLoad()):e.keyCode===cc.macro.KEY.q?(console.log("Q \u9375\u88ab\u6309\u4e0b"),this.preloadScenes("PlistBundle","Game",0)):e.keyCode===cc.macro.KEY.w?(console.log("W \u9375\u88ab\u6309\u4e0b"),this.preloadScenes("PlistOldBundle","Game",0)):e.keyCode===cc.macro.KEY.a?(console.log("A \u9375\u88ab\u6309\u4e0b"),this.oldLoadBundle("PlistOldBundle","01/Prefab/ButterflyRSC")):e.keyCode===cc.macro.KEY.r?(console.log("R \u9375\u88ab\u6309\u4e0b"),this.oldLoadBundle("PlistBundle","01/Prefab/flying-Walk_00")):e.keyCode===cc.macro.KEY.n?(console.log("N \u9375\u88ab\u6309\u4e0b"),this.trueOldLoadBundle("PlistOldBundle","01/Prefab/ButterflyRSC")):e.keyCode===cc.macro.KEY.m?(console.log("M \u9375\u88ab\u6309\u4e0b"),this.trueOldLoadBundle("PlistBundle","01/Prefab/flying-Walk_00")):e.keyCode===cc.macro.KEY.v&&(console.log("V \u9375\u88ab\u6309\u4e0b"),this.trueOldLoadBundle("TestFish","Fish01/Prefab/ButterflyRSC"))},o.prototype.testLoad=function(){var e=this;cc.assetManager.loadBundle("TestBundle",function(o,n){o?console.error("\u8f09\u5165 bundle \u5931\u6557",o):n.load("AutoAtlas",cc.SpriteAtlas,function(o,n){if(o)console.error("\u8f09\u5165 SpriteFrame \u5931\u6557",o);else{console.log("\u8f09\u5165\u5b8c\u6210",n);var t=n.getSpriteFrame("ButterflyRSC_lock");e.fishicon[0].spriteFrame=t;var r=n.getSpriteFrame("ClownRSC_lock");e.fishicon[1].spriteFrame=r;var c=n.getSpriteFrame("DragonCarp_lock");e.fishicon[2].spriteFrame=c}})})},o.prototype.secondLoad=function(){var e=this;cc.assetManager.loadBundle("MyIcon",function(o,n){o?console.error("\u8f09\u5165 bundle \u5931\u6557",o):n.load("TestIcon",cc.Texture2D,function(o,n){if(o)console.error("\u8f09\u5165 TestIcon \u5931\u6557",o);else{console.log("\u8f09\u5165\u5b8c\u6210",n);for(var t=0;t<3;t++){var r=new cc.SpriteFrame;r.setTexture(n),r.setRect(new cc.Rect(140*t,0,140,160)),e.fishicon[t].spriteFrame=r}}})})},o.prototype.preloadScenes=function(e,o,n){var t=this;return new Promise(function(r){t.loadBundle(e).then(function(e){e.loadScene("scene/"+o,function(e,o){t.refreshProgress(n,e,o)},function(e,o){e&&(console.error(e),r(null)),console.log("\u52a0\u8f09game scene \u6210\u529f"),cc.director.runScene(o),r(o)})})})},o.prototype.refreshProgress=function(e,o,n){var t=e+o/n;console.log("loading_resource",[Math.floor(100*t)+""])},o.prototype.loadBundle=function(e){return new Promise(function(o){cc.assetManager.loadBundle(e,function(){},function(e,n){if(e)return console.error("ddt "+e),void o(null);console.log("\u52a0\u8f09PlistBundle\u6210\u529f"),o(n)})})},o.prototype.oldLoadBundle=function(e,o){var n=this;console.log("\u5de8\u9be8\u8b80\u53d6\u65b9\u5f0f~~~~~~"),cc.assetManager.loadBundle(e,function(e,t){t?(console.log("\u5de8\u9be8\u8b80\u53d6\u65b9\u5f0f \u6210\u529f"),n.loadAsset(t,o).then(function(){console.log("loadAsset \u6210\u529f")}).catch(function(){return console.error("loadAsset \u5931\u6557"),null})):console.error("\u5de8\u9be8\u8b80\u53d6\u65b9\u5f0f \u5931\u6557")})},o.prototype.trueOldLoadBundle=function(e,o){var n=this;console.log("123___\u5de8\u9be8\u8b80\u53d6\u65b9\u5f0f~~~~~~"),cc.assetManager.loadBundle(e,function(e,t){t?(console.log("123___\u5de8\u9be8\u8b80\u53d6\u65b9\u5f0f \u6210\u529f"),n.trueloadAsset(t,o).then(function(e){console.log("123___loadAsset \u6210\u529f"),cc.instantiate(e)}).catch(function(){return console.error("123___loadAsset \u5931\u6557"),null})):console.error("123___\u5de8\u9be8\u8b80\u53d6\u65b9\u5f0f \u5931\u6557")})},c([a(cc.Sprite)],o.prototype,"fishicon",void 0),c([u],o)}(cc.Component);n.default=f,cc._RF.pop()},{}]},{},["LoadBundle"]);