window.__require=function e(o,t,r){function n(i,s){if(!t[i]){if(!o[i]){var u=i.split("/");if(u=u[u.length-1],!o[u]){var a="function"==typeof __require&&__require;if(!s&&a)return a(u,!0);if(c)return c(u,!0);throw new Error("Cannot find module '"+i+"'")}i=u}var l=t[i]={exports:{}};o[i][0].call(l.exports,function(e){return n(o[i][1][e]||e)},l,l.exports,e,o,t,r)}return t[i].exports}for(var c="function"==typeof __require&&__require,i=0;i<r.length;i++)n(r[i]);return n}({LoadBundle:[function(e,o,t){"use strict";cc._RF.push(o,"c0c2cxrOxRCmLQ9Bd4TT9u5","LoadBundle");var r,n=this&&this.__extends||(r=function(e,o){return(r=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,o){e.__proto__=o}||function(e,o){for(var t in o)Object.prototype.hasOwnProperty.call(o,t)&&(e[t]=o[t])})(e,o)},function(e,o){function t(){this.constructor=e}r(e,o),e.prototype=null===o?Object.create(o):(t.prototype=o.prototype,new t)}),c=this&&this.__decorate||function(e,o,t,r){var n,c=arguments.length,i=c<3?o:null===r?r=Object.getOwnPropertyDescriptor(o,t):r;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)i=Reflect.decorate(e,o,t,r);else for(var s=e.length-1;s>=0;s--)(n=e[s])&&(i=(c<3?n(i):c>3?n(o,t,i):n(o,t))||i);return c>3&&i&&Object.defineProperty(o,t,i),i};Object.defineProperty(t,"__esModule",{value:!0});var i=cc._decorator,s=i.ccclass,u=i.property,a=function(e){function o(){var o=null!==e&&e.apply(this,arguments)||this;return o.fishicon=[],o}return n(o,e),o.prototype.onLoad=function(){cc.systemEvent.on(cc.SystemEvent.EventType.KEY_DOWN,this.onKeyDown,this)},o.prototype.onKeyDown=function(e){e.keyCode===cc.macro.KEY.z?(cc.log("Z \u9375\u88ab\u6309\u4e0b"),this.testLoad()):e.keyCode===cc.macro.KEY.x?(cc.log("X \u9375\u88ab\u6309\u4e0b"),this.secondLoad()):e.keyCode===cc.macro.KEY.q&&(cc.log("Q \u9375\u88ab\u6309\u4e0b"),this.preloadScenes("Game",0))},o.prototype.testLoad=function(){var e=this;cc.assetManager.loadBundle("TestBundle",function(o,t){o?console.error("\u8f09\u5165 bundle \u5931\u6557",o):t.load("AutoAtlas",cc.SpriteAtlas,function(o,t){if(o)console.error("\u8f09\u5165 SpriteFrame \u5931\u6557",o);else{console.log("\u8f09\u5165\u5b8c\u6210",t);var r=t.getSpriteFrame("ButterflyRSC_lock");e.fishicon[0].spriteFrame=r;var n=t.getSpriteFrame("ClownRSC_lock");e.fishicon[1].spriteFrame=n;var c=t.getSpriteFrame("DragonCarp_lock");e.fishicon[2].spriteFrame=c}})})},o.prototype.secondLoad=function(){var e=this;cc.assetManager.loadBundle("MyIcon",function(o,t){o?console.error("\u8f09\u5165 bundle \u5931\u6557",o):t.load("TestIcon",cc.Texture2D,function(o,t){if(o)console.error("\u8f09\u5165 TestIcon \u5931\u6557",o);else{console.log("\u8f09\u5165\u5b8c\u6210",t);for(var r=0;r<3;r++){var n=new cc.SpriteFrame;n.setTexture(t),n.setRect(new cc.Rect(140*r,0,140,160)),e.fishicon[r].spriteFrame=n}}})})},o.prototype.preloadScenes=function(e,o){var t=this;return new Promise(function(r){t.loadBundle("PlistBundle").then(function(n){n.loadScene("scene/"+e,function(e,r){t.refreshProgress(o,e,r)},function(e,o){e&&(cc.error(e),r(null)),cc.log("\u52a0\u8f09game scene \u6210\u529f"),cc.director.runScene(o),r(o)})})})},o.prototype.refreshProgress=function(e,o,t){var r=e+o/t;cc.log("loading_resource",[Math.floor(100*r)+""])},o.prototype.loadBundle=function(e){return new Promise(function(o){cc.assetManager.loadBundle(e,function(){},function(e,t){if(e)return cc.error("ddt "+e),void o(null);cc.log("\u52a0\u8f09PlistBundle\u6210\u529f"),o(t)})})},c([u(cc.Sprite)],o.prototype,"fishicon",void 0),c([s],o)}(cc.Component);t.default=a,cc._RF.pop()},{}]},{},["LoadBundle"]);